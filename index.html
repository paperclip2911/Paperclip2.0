<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Paperclip Empire 5.5</title>
<style>
body{
    margin:0;
    background:linear-gradient(135deg,#111,#1c1c1c);
    color:#eee;
    font-family:Arial;
}
#loginScreen{
    position:fixed;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    background:radial-gradient(circle,#222,#000);
}
#loginBox{
    background:#1e1e1e;
    padding:30px;
    border-radius:12px;
    box-shadow:0 0 20px #000;
    text-align:center;
}
input,button{
    padding:8px;
    margin:6px;
}
.panel{
    background:#1e1e1e;
    padding:15px;
    margin:10px;
    border-radius:10px;
}
.card{
    display:inline-block;
    width:60px;
    height:90px;
    background:white;
    color:black;
    border-radius:8px;
    text-align:center;
    line-height:90px;
    font-weight:bold;
    margin:5px;
}
#casinoRoom{
    position:fixed;
    inset:0;
    background:#181818;
    display:none;
    padding:20px;
    overflow:auto;
}
</style>
</head>
<body>

<div id="loginScreen">
<div id="loginBox">
<h1>Paperclip Empire</h1>
<p>Enter Username</p>
<input id="username">
<br>
<button onclick="login()">Enter</button>
</div>
</div>

<div id="game" style="display:none;padding:15px">
<button onclick="openCasino()">ðŸŽ° Casino</button>
<h2>Clips: <span id="clips">0</span></h2>
</div>

<div id="casinoRoom">
<button onclick="closeCasino()">Close</button>
<h2>Blackjack</h2>
Bet <input id="bjBet" type="number" value="50">
<button onclick="startBJ()">Start</button>
<button onclick="hit()">Hit</button>
<button onclick="stand()">Stand</button>
<button onclick="doubleDown()">Double Down</button>

<h3>Dealer (<span id="dealerTotal">0</span>)</h3>
<div id="dealerCards"></div>

<h3>Player (<span id="playerTotal">0</span>)</h3>
<div id="playerCards"></div>

<p id="bjResult"></p>
</div>

<script>
let user=""
let clips=1000

/* SAVE SYSTEM */
function save(){
localStorage.setItem("paper_"+user,JSON.stringify({clips}))
}
function load(){
let data=JSON.parse(localStorage.getItem("paper_"+user))
if(data) clips=data.clips
}
function login(){
user=username.value
if(!user)return
load()
loginScreen.style.display="none"
game.style.display="block"
update()
}
function update(){
clips=Math.floor(clips)
document.getElementById("clips").innerText=clips
save()
}

/* CASINO */
function openCasino(){casinoRoom.style.display="block"}
function closeCasino(){casinoRoom.style.display="none"}

/* BLACKJACK SYSTEM */
let deck=[]
let player=[]
let dealer=[]
let bjActive=false
let currentBet=0
let doubled=false

function createDeck(){
let suits=["â™ ","â™¥","â™¦","â™£"]
let ranks=["A","2","3","4","5","6","7","8","9","10","J","Q","K"]
deck=[]
for(let s of suits){
for(let r of ranks){
deck.push({rank:r,suit:s})
}
}
deck.sort(()=>Math.random()-0.5)
}

function cardValue(card){
if(card.rank==="A") return 11
if(["K","Q","J"].includes(card.rank)) return 10
return parseInt(card.rank)
}

function handTotal(hand){
let total=0
let aces=0
for(let c of hand){
total+=cardValue(c)
if(c.rank==="A") aces++
}
while(total>21 && aces>0){
total-=10
aces--
}
return total
}

function render(){
playerCards.innerHTML=""
dealerCards.innerHTML=""
player.forEach(c=>{
playerCards.innerHTML+=`<div class="card">${c.rank}${c.suit}</div>`
})
dealer.forEach(c=>{
dealerCards.innerHTML+=`<div class="card">${c.rank}${c.suit}</div>`
})
playerTotal.innerText=handTotal(player)
dealerTotal.innerText=handTotal(dealer)
update()
}

function startBJ(){
let bet=parseInt(bjBet.value)
if(bet>clips||bet<=0)return
createDeck()
player=[deck.pop(),deck.pop()]
dealer=[deck.pop(),deck.pop()]
clips-=bet
currentBet=bet
bjActive=true
doubled=false
bjResult.innerText=""
render()
}

function hit(){
if(!bjActive)return
player.push(deck.pop())
render()
if(handTotal(player)>21){
bjResult.innerText="Bust! Dealer Wins"
bjActive=false
}
}

function stand(){
if(!bjActive)return
while(handTotal(dealer)<17){
dealer.push(deck.pop())
}
let p=handTotal(player)
let d=handTotal(dealer)
if(d>21||p>d){
clips+=currentBet*2
bjResult.innerText="You Win!"
}else if(p===d){
clips+=currentBet
bjResult.innerText="Push!"
}else{
bjResult.innerText="Dealer Wins"
}
bjActive=false
render()
}

function doubleDown(){
if(!bjActive||doubled)return
if(clips<currentBet)return
clips-=currentBet
currentBet*=2
doubled=true
player.push(deck.pop())
render()
if(handTotal(player)>21){
bjResult.innerText="Bust after Double!"
bjActive=false
return
}
stand()
}

update()
</script>
</body>
</html>
